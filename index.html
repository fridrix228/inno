<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="header.css">
    <link rel="stylesheet" href="animation.css">
    <link rel="stylesheet" href="mobile.css">
    <link rel="icon" type="image/png" href="img/logomain.png">
    <link href="https://cdn.jsdelivr.net/gh/repalash/gilroy-free-webfont@fonts/Gilroy-Light.css" rel="stylesheet">
    <link href="https://raw.githubusercontent.com/repalash/gilroy-free-webfont/fonts/Gilroy-Light.css" rel="stylesheet">
    <link rel="preconnect" href="//fdn.fontcdn.ir">
    <link rel="preconnect" href="//v1.fontapi.ir">
    <link href="https://v1.fontapi.ir/css/SFProDisplay" rel="stylesheet">
    <title>InnoWhite</title>

</head>

<body class="loading">

    <div id="intro-video-wrap" class="intro-wrap" >
        <video id="intro-video" playsinline webkit-playsinline autoplay muted loop preload="auto">
            <source src="img/intro2_silent.mp4#t=0.001" type="video/mp4">
        </video>
        <img id="intro-fallback" alt="Intro" style="display: none;">
    </div>

    <div class="main">
        <div class="headb"></div>
        <header class="reveal-delayed">
            <nav class="header">
                <a href="#page1">О компании</a>
                <a href="#page2">Задачи</a>
                <a href="#page4">Ассортимент</a>

                <a href="#page0" class="logo"><img src="img/Group 20.svg" alt=""></a>

                <a href="#page5">Преимущества</a>
                <a href="#page6">Связь</a>
                <a href="#page7">Фото</a>
            </nav>

        </header>
        <header class="mobile-header">
            <div class="mobile-header-inner">
                <a href="#page0" class="mobile-logo">
                    <img src="img/Group 20.svg" alt="Logo" />
                </a>
                <div class="burger" id="burger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
            <nav class="mobile-nav" id="mobileNav">
                <a href="#page1">О компании</a>
                <a href="#page2">Задачи</a>
                <a href="#page4">Ассортимент</a>
                <a href="#page5">Преимущества</a>
                <a href="#page6">Связь</a>
                <a href="#page7">Фото</a>
            </nav>
        </header>


        <div class="content">
            <div class="page1" id="page0">
                <h1 class="metallic-text">INNO WHITE</h1>
                <p>Улыбка которая открывает двери и закрывает вопросы</p>
                <div class="page1cont">

                    <div class="block1">
                        <div class="leftcount" reveal-delayed>
                            <p></p>
                            <video id="desvid" src="img/Gen2.mp4" autoplay loop muted playsinline preload="none"
                                loading="lazy"></video>
                            <video id="mobvid" src="img/mobiletooth.mp4" autoplay loop muted playsinline preload="none"
                                loading="lazy"></video>
                            <!-- <a href="" class="button" id="page1">
                                <div class="buttonmain">
                                    Подробнее
                                </div>
                                <div class="arrow">
                                    →
                                </div>
                            </a> -->
                        </div>

                        <div class="center">
                            <video src="img/tooth1.webm" autoplay loop muted playsinline preload="none"
                                loading="lazy"></video>
                        </div>
                        <div class="rightcount" reveal-delayed>
                            <video src="img/Gen.mp4" autoplay loop muted playsinline preload="none"
                                loading="lazy"></video>
                            <p></p>
                        </div>
                    </div>
                </div>

            </div>
            <div class="page2 reveal">
                <div class="page2cont">
                    <h1 class="metallic-text">О НАС</h1>
                    <div class="blockp2">
                        <p align="justify">Innowhite — ведущий разработчик и производитель отбеливающей косметики для
                            полости рта. Мы создаём инновационные продукты, которые не только эффективно отбеливают
                            зубы, но и заботятся о здоровье вашей улыбки.
                            Наша команда — это группа профессионалов и единомышленников, объединённых общей целью:
                            делать улыбки ярче, а жизнь — увереннее. Мы верим, что красивая и здоровая улыбка должна
                            быть доступной каждому, и поэтому разрабатываем безопасные, научно обоснованные и
                            действенные решения.
                        </p>
                        <div class="blockp21">
                            <p align="justify">Продукция Innowhite создаётся с использованием современных технологий и
                                проверенных ингредиентов. Мы строго соблюдаем стандарты качества на каждом этапе — от
                                идеи до готового продукта. Все наши средства проходят тщательное тестирование и
                                направлены на достижение максимального результата без вреда для эмали и десен.
                                Наша миссия — не просто отбеливание зубов, а комплексный уход за вашей улыбкой. Мы
                                стремимся к тому, чтобы каждый наш продукт стал шагом к уверенному и здоровому будущему.
                            </p>
                        </div>
                    </div><br>

                </div>

            </div>
            <div class="vid1" id="page2">
                <video id="vid1" src="img/Gen4.mp4" autoplay loop muted playsinline preload="none"
                    loading="lazy"></video>
            </div>

            <div class="page3 reveal">
                <div class="page3cont">
                    <div class="absimg1"><video src="/img/Gen.mp4" autoplay loop muted playsinline preload="none"
                            loading="lazy"></video></div>
                    <h1 class="metallic-text">4 ШАГА ДО ИДЕАЛЬНОЙ ФОРМУЛЫ</h1>
                    <div class="mian3block">
                        <div class="blockp3">
                            <div class="block31 reveal">
                                <div class="number ">1</div>
                                <h3>От идеи — к задаче</h3>
                                <p>Наша отправная точка — чёткое понимание потребностей клиентов. Мы ставим перед собой
                                    цель создать продукт, который не просто отбеливает зубы, а делает это безопасно,
                                    эстетично и удобно. Наши средства подходят для использования в любое время и
                                    в любом
                                    месте — красивая улыбка должна быть доступна всегда.
                                </p>
                            </div>
                            <div class="block32">
                                <div class="numberblack">2</div>
                                <h3>Научный подход и выбор компонентов</h3>
                                <p>Каждое наше решение основано на современных научных исследованиях. Мы тщательно
                                    подбираем ингредиенты, чтобы они эффективно отбеливали эмаль, не повреждая её
                                    структуру. Безопасность — приоритет на каждом этапе разработки.</p>
                            </div>
                        </div>
                        <div class="blockp4">
                            <div class="block41">
                                <div class="number">3</div>
                                <h3>Тестирование и контроль эффективности</h3>
                                <p>Мы проводим многочисленные лабораторные испытания, чтобы определить наилучшие
                                    комбинации компонентов. Особое внимание уделяется защите эмали и исключению
                                    чувствительности зубов. Только после успешных тестов формулы проходят на следующий
                                    этап. Ваша улыбка под нашей профессиональной защитой!</p>
                            </div>
                            <div class="mainblock40">
                                <div class="block42">
                                    <div class="number" id="number">4</div>
                                    <h3>Совершенство формулы</h3>
                                    <p>Финальный этап — доведение продукта до идеального баланса между эффективностью и
                                        безопасностью. Мы утверждаем только те формулы, которые обеспечивают заметный
                                        результат, сохраняя здоровье зубов и комфорт при использовании. Мы уверены в
                                        каждом продукте, который предлагаем, потому что создаём его с вниманием к
                                        деталям и заботой о вас.</p>
                                </div>
                             
                            </div>
                        </div>
                        
                    </div>
                </div> <a href="" class="button">
                                        <div class="buttonmain">
                                            Подробнее
                                        </div>
                                        <div class="arrow">
                                            →
                                        </div>
                                    </a>

            </div>
            <div class="page4 reveal" id="page3">
                <div class="page4cont">
                    <h1>НОВИНКИ INNOWHITE</h1>
                    <div class="newnovbar">
                        <div class="newnov1">
                            <p>Электрощетки</p>
                        </div>
                        <div class="newnov1" id="newnov1">
                            <p>Ирригаторы</p>
                        </div>
                        <div class="newnov1" id="newnov1">
                            <p>Зубные нити</p>
                        </div>
                        <div class="newnov1" id="newnov1">
                            <p>Улучшенные каппы</p>
                        </div>
                    </div>
                </div>
                <div class="page4photo">
                    <div class="first">

                    </div>
                    <div class="second">

                    </div>
                </div>
                <div class="page4text">
                    <p>Высококачественные электрощетки обеспечат глубокую и бережную очистку.</p>
                </div>
            </div>
            <div class="page5 reveal" id="page4">
                <div class="absimg2 reveal">
                    <video src="img/Gen4.mp4" autoplay loop muted playsinline preload="none" loading="lazy"></video>
                </div>
                <h1 class="metallic-text">АССОРТИМЕНТ</h1>

                <div class="page5nav">
                    <div class="page5nav1" data-index="0">Ополаскиватели</div>
                    <div class="page5nav1" data-index="1">Гели</div>
                    <div class="page5nav1" data-index="2">Полоски</div>
                    <div class="page5nav1" data-index="3">Наборы</div>
                    <div class="page5nav1" data-index="4">Щётки</div>
                    <div class="page5nav1" data-index="5">Пасты</div>
                </div>

                <div class="slider-container">
                    <button class="slider-arrow left"><img src="img/Polygon 1.svg" alt="←"></button>

                    <div id="slider-display">
                        <div class="slide"><img id="desas" src="img/product11.png" alt="Ополаскиватель"> <img id="mobas" src="img/product111.png" alt="Ополаскиватель"></div>
                        <div class="slide"><img id="desas" src="img/product21.png" alt="Гели"><img id="mobas" src="img/product211.png" alt="Ополаскиватель"></div>
                        <div class="slide"><img id="desas" src="img/product31.png" alt="Полоски"><img id="mobas" src="img/product311.png" alt="Ополаскиватель"></div>
                        <div class="slide"><img id="desas" src="img/product41.png" alt="Наборы"><img id="mobas" src="img/product411.png" alt="Ополаскиватель"></div>
                        <div class="slide"><img id="desas" src="img/product51.png" alt="Щётка"><img id="mobas" src="img/product511.png" alt="Ополаскиватель"></div>
                        <div class="slide"><img id="desas" src="img/product61.png" alt="Паста"><img id="mobas" src="img/product611.png" alt="Ополаскиватель"></div>
                    </div>

                    <button class="slider-arrow right"><img src="img/Polygon 2.svg" alt="→"></button>
                </div>
                <a href="" class="button" id="sale">
                    <div class="buttonmain">
                        Заказать
                    </div>
                    <div class="arrow">
                        →
                    </div>
                </a>
            </div>

            <div class="page6 reveal" id="page5">
                <div class="page6cont">
                    <h1 class="metallic-text">ПРЕИМУЩЕСТВА</h1>
                    <div class="blockp6">
                        <div class="block61">
                            <div class="block6text" id="block6text">
                                <h3>Уникальные разработки</h3>
                                <p>INNOWHITE — это ведущий разработчик отбеливающей косметики для полости рта, предлагающий уникальные формулы, созданные на основе последних научных исследований. Мы разрабатываем и производим наши продукты самостоятельно, что позволяет нам контролировать качество на каждом этапе.</p>
                            </div>
                            <div class="block6text">
                                <h3>Беспероксидные решения</h3>
                                <p>Наши беспероксидные составы обеспечивают эффективность, сопоставимую с традиционными пероксидными средствами, но при этом исключает риск повреждения эмали. Это делает наши продукты безопасными и подходящими для более широкой аудитории.</p>
                            </div>

                            <div class="block6text">
                                <h3>Сертифицированное качество</h3>
                                <p>Каждый продукт INNOWHITE имеет европейские и ЕАЭС сертификаты, что подтверждает их высокие стандарты качества и безопасности. Мы строго следуем международным нормам, чтобы гарантировать надежность нашей продукции.</p>
                            </div>
                            <div class="block6text">
                                <h3>Научный подход</h3>
                                <p>Наши средства основаны на современных научных исследованиях в области стоматологии и косметологии. Мы используем только лучшие ингредиенты, что позволяет нам предлагать безопасные и эффективные решения для отбеливания зубов.</p>
                            </div>
                            <div class="block6text">
                                <h3>Максимальная эффективность</h3>
                                <p>Инновационные ингредиенты в наших формулах обеспечивают максимальную эффективность при отсутствии негативного эффекта на эмаль зубов. Мы стремимся к тому, чтобы каждый наш продукт приносил заметные результаты без ущерба для здоровья.</p>
                            </div>
                            <div class="block6text">
                                <h3>Постоянные инновации</h3>
                                <p>INNOWHITE активно проводит исследования и тестирования, что позволяет нам постоянно улучшать наши формулы и оставаться на переднем крае технологий в области отбеливания зубов. Мы гордимся тем, что можем предложить нашим клиентам новейшие разработки в этой сфере.</p>
                                <br> 
                                <h3>Выбирая INNOWHITE, вы выбираете качество, безопасность и инновации в области отбеливания зубов!</h3>
                            <br><br></div>
                            
                        </div>
                        <div class="block62 reveal">
                            <video src="img/tooth1.mp4" autoplay loop muted playsinline preload="none"
                                loading="lazy"></video>
                        </div>
                    </div>
                </div>
            </div>
            <div class="absimg3 reveal">
                <video src="img/Gen1.mp4" autoplay loop muted playsinline preload="none" loading="lazy"></video>
            </div>
            <div class="page7" id="page6">
                <div class="page7cont">
                    <h1 class="metallic-text">СВЯЗАТЬСЯ С НАМИ</h1>
                    <p>Спасибо за ваш интерес к INNOWHITE! Мы рады приветствовать вас на нашем сайте и готовы помочь вам в любых вопросах, связанных с нашими продуктами для отбеливания зубов.
                        <br> <br>
                        Если вы представляете бизнес и заинтересованы в сотрудничестве, мы предлагаем уникальные возможности B2B. Наша продукция отличается высоким качеством и эффективностью, что делает её идеальным выбором для стоматологических клиник, салонов красоты, розничных сетей и дистрибьюторов.
                     <br> <br>
                    Для получения дополнительной информации о наших B2B-предложениях, условиях сотрудничества или запросов на оптовые закупки, пожалуйста, свяжитесь с нами:
                    </p>
                </div>
                <a href="" class="button">
                    <div class="buttonmain">
                        Связаться
                    </div>
                    <div class="arrow">
                        →
                    </div>
                </a>
            </div>
            <div class="page8 reveal" id="page7">
                <div class="page8cont">
                    <h1 class="metallic-text">ФОТОГАЛЕРЕЯ</h1>
                    <div class="gallery">
                        <div class="gallery-left"></div>
                        <div class="gallery-right">
                            <div class="gallery-top"></div>
                            <div class="gallery-bottom">
                                <div class="gallery-small"></div>
                                <div class="gallery-small"></div>
                            </div>
                        </div>
                    </div>
                    <div class="gallery-dots">
                        <span class="dot active"></span>
                        <span class="dot"></span>
                        <span class="dot"></span>
                        <span class="dot"></span>
                    </div>

                </div>
                <div id="lightbox" class="lb hide">
                    <button class="lb-close">×</button>
                    <button class="lb-prev">‹</button>
                    <img class="lb-img" src="" alt="">
                    <button class="lb-next">›</button>
                    <a href="https://www.instagram.com/innowhite/" target="_blank" class="lb-more">
                        Instagram <img src="img/instagram1.svg" alt="Instagram">
                    </a>
                </div>
            </div>

            <div class="zeroblock">

            </div>
            <footer class="footer reveal" id="page8">
                <div class="footer-top">
                    <div class="footer-logo">
                        <img src="img/Group 20.svg" alt="InnoWhite Logo">

                        <p>Улыбка которая открывает двери и закрывает вопросы</p>

                        <div class="footer-social"><a id="inst" href="https://www.instagram.com/innowhite/"
                                target="_blank"><img src="img/inst.png" alt="Instagram"></a>
                            <a href="https://ozon.ru/" target="_blank"><img src="img/ozz.png" alt="Ozon"></a>
                            <a href="https://www.wildberries.ru/" target="_blank"><img src="img/wbb.png"
                                    alt="Wildberries"></a>

                        </div>
                    </div>
                    <div class="footer-links">
                        <div>
                            <h4>Разделы</h4>
                            <a href="#page1">О компании</a>
                            <a href="#page2">Задачи</a>
                            <a href="#page3">Ассортимент</a>
                            <a href="#page4">Преимущества</a>
                            <a href="#page5">Связь</a>
                            <a href="#page6">Фото</a>
                        </div>
                        <div>
                            <h4>Контакты</h4>
                            <p>inno@white.com</p>
                            <p>+7 (900) 123-45-67</p>
                            <p>г. XXxxxx</p>
                        </div>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>© 2025 InnoWhite. Все права защищены.</p>
                </div>
            </footer>

        </div>

    </div>

    <div class="modal" id="orderModal">
        <div class="modal__dialog">
            <button class="modal__close">×</button>

            <h1 class="metallic-text modal__title">Заказ</h1>
            <p class="modal__text">Наша продукция доступна на площадках:</p>

            <div class="modal__shops">
                <a href="https://ozon.ru/" target="_blank"><img src="img/ozonw.svg" alt="Ozon"></a>
                <a href="https://www.wildberries.ru" target="_blank"><img src="img/wb.svg" alt="Wildberries"></a>
                <a href="https://www.wildberries.ru" target="_blank"><img src="img/instagramw.svg"
                        alt="Wildberries"></a>

            </div>

        </div>
    </div>

</body>
<script src="script.js">
</script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const v = document.getElementById('intro-video');

        /*‑‑ страховка для iOS: задаём muted и пытаемся запустить вручную ‑‑*/
        v.muted = true;                // свойство, не только атрибут
        v.play().catch(() => {
            /* если всё‑таки заблокировало, ждём первого тапа и сразу играем */
            const resume = () => { v.play(); document.removeEventListener('touchstart', resume); };
            document.addEventListener('touchstart', resume);
        });
    });
</script>
<script>
    const spacing = 350;                                   // расстояние между центрами
    const slides = document.querySelectorAll('.slide');
    const nav = document.querySelectorAll('.page5nav1');
    const len = slides.length;
    let current = 0;                                     // центральный индекс

    /* ---------- рендер --------------------------------------------------- */
    function render() {
        slides.forEach((sl, i) => {
            let d = (i - current + len) % len;                       // 0..5
            if (d > len / 2) d -= len;                              // теперь в -3..2
            const off = d * spacing;
            const scale = d === 0 ? 3.3 : 0.75;
            const blur = d === 0 ? 'none' : 'blur(3px) brightness(0.7)';
            const opac = Math.abs(d) <= 1 ? 1 : 0;                  // показываем только 3 слайда
            const z = d === 0 ? 2 : 1;

            sl.style.transform = `translate(-50%,-50%) translateX(${off}px) scale(${scale})`;
            sl.style.filter = blur;
            sl.style.opacity = opac;
            sl.style.zIndex = z;
        });

        nav.forEach((item, i) => item.classList.toggle('active', i === current));
    }

    /* ---------- события -------------------------------------------------- */
    document.querySelector('.slider-arrow.left')
        .addEventListener('click', () => { current = (current - 1 + len) % len; render(); });
    document.querySelector('.slider-arrow.right')
        .addEventListener('click', () => { current = (current + 1) % len; render(); });
    nav.forEach((item, i) => item.addEventListener('click', () => { current = i; render(); }));

    /* ---------- первый запуск ------------------------------------------- */
    render();
</script>
<script type="module">
    /* ---------- настройки --------------------------------------------- */
    const TOTAL = 16;                       // всего фото
    const full = i => `img/photo${i}.jpg`;     // путь к полно‑размерному

    /* ---------- DOM ---------------------------------------------------- */
    const gLeft = document.querySelector('.gallery-left');
    const gTop = document.querySelector('.gallery-top');
    const gSmall = document.querySelectorAll('.gallery-small');
    const dots = document.querySelectorAll('.dot');

    const light = document.getElementById('lightbox');
    const lbImg = light.querySelector('.lb-img');
    const lbPrev = light.querySelector('.lb-prev');
    const lbNext = light.querySelector('.lb-next');
    const lbClose = light.querySelector('.lb-close');

    /* ---------- состояние ---------------------------------------------- */
    let groupIdx = 0;           // какая пачка «точек» сейчас 0‑3
    let lbIdx = 1;           // текущая картинка в lightbox (1‑17)

    /* ---------- helpers ------------------------------------------------- */
    function setBg(el, url) { el.style.backgroundImage = `url(${url})`; }
    function fadeIn(el) {
        el.classList.remove('gallery-ready');
        requestAnimationFrame(() => el.classList.add('gallery-ready'));
    }

    /* ---------- галерея ------------------------------------------------- */
    const groupSize = 4, groupsTotal = Math.ceil(TOTAL / groupSize);

    function renderGallery() {
        const start = groupIdx * groupSize;          // 0,4,8...
        const indices = Array.from({ length: groupSize }, (_, i) => (start + i) % TOTAL + 1);

        setBg(gLeft, full(indices[0])); gLeft.dataset.id = indices[0];
        setBg(gTop, full(indices[1])); gTop.dataset.id = indices[1];
        gSmall.forEach((el, i) => { setBg(el, full(indices[i + 2])); el.dataset.id = indices[i + 2]; });

        [gLeft, gTop, ...gSmall].forEach(fadeIn);
        dots.forEach((d, i) => d.classList.toggle('active', i === groupIdx));
    }

    /* ---------- lightbox ----------------------------------------------- */
    function openLB(id) {
        lbIdx = ((id - 1 + TOTAL) % TOTAL) + 1;      // нормализуем
        lbImg.classList.remove('show');              // плавно прячем
        setTimeout(() => {
            lbImg.src = full(lbIdx);                 // меняем картинку
            lbImg.onload = () => lbImg.classList.add('show'); // fade‑in после загрузки
        }, 200);
    }

    lbPrev.onclick = () => openLB(lbIdx - 1);
    lbNext.onclick = () => openLB(lbIdx + 1);
    lbClose.onclick = () => light.classList.add('hide');

    /* ---------- клики по миниатюрам ------------------------------------ */
    [gLeft, gTop, ...gSmall].forEach(el => {
        el.addEventListener('click', () => {
            openLB(+el.dataset.id);
            light.classList.remove('hide');
        });
    });

    /* ---------- свайп для тача  ---------------------------------------- */
    function swipe(el, onLeft, onRight, min = 40) {
        let x0 = null;
        el.addEventListener('touchstart', e => x0 = e.touches[0].clientX, { passive: true });
        el.addEventListener('touchend', e => {
            if (x0 === null) return;
            const dx = e.changedTouches[0].clientX - x0;
            if (Math.abs(dx) > min) (dx < 0 ? onLeft : onRight)();
            x0 = null;
        });
    }

    swipe(light, () => openLB(lbIdx + 1), () => openLB(lbIdx - 1));       // свайп внутри lightbox
    swipe(document.querySelector('.gallery'),
        () => { groupIdx = (groupIdx + 1) % groupsTotal; renderGallery(); },
        () => { groupIdx = (groupIdx - 1 + groupsTotal) % groupsTotal; renderGallery(); }
    );

    /* ---------- авто‑карусель ------------------------------------------ */
    let timer;
    function resetTimer() {
        clearInterval(timer);
        timer = setInterval(() => { groupIdx = (groupIdx + 1) % groupsTotal; renderGallery(); }, 5000);
    }
    dots.forEach((dot, i) => dot.onclick = () => { groupIdx = i; renderGallery(); resetTimer(); });

    /* ---------- init ---------------------------------------------------- */
    renderGallery(); resetTimer();

</script>

<script>
    /* ------------------- Intersection Observer ------------------- */
    const observer = new IntersectionObserver((entries, obs) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('show');   // даём «разрешение» CSS‑у
                obs.unobserve(entry.target);          // нужно сработать только раз
            }
        });
    }, {
        threshold: 0.25      // 25 % блока в кадре — уже считаем «видно»
    });

    /* подписываемся на все .reveal */
    document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
</script>


<script>
    window.addEventListener('load', () => {
        // запускаем анимацию первого экрана
        document.querySelector('.block1')?.classList.add('show');
    });
</script>
<script>
    window.addEventListener('load', () => {
        // Центр появляется с анимацией
        const body = document.body;

        // После bounce-интро показываем всё остальное
        setTimeout(() => {
            body.classList.add('reveal-start'); // показывает всё
            document.querySelector('.block1')?.classList.add('show');
        }, 1400); // после centerBounceIn
    });
    window.addEventListener('load', () => {
        setTimeout(() => {
            document.body.classList.add('reveal-start');
            document.querySelector('.block1')?.classList.add('show');
        }, 1400); // после bounce центра
    });
</script>
<script>
    window.addEventListener('load', () => {
        const introWrap = document.getElementById('intro-video-wrap');
        const video = document.getElementById('intro-video');

        // Либо ждём окончания видео:
        // video.addEventListener('ended', hideIntro);

        // Либо авто-скрытие через N секунд:
        setTimeout(hideIntro, 4000); // 4 секунды (можешь изменить)

        function hideIntro() {
            introWrap.classList.add('fade-out');

            setTimeout(() => {
                introWrap.remove();
                document.querySelector('.center')?.classList.add('bounce-start');
                document.body.classList.add('reveal-start');
                document.querySelector('.block1')?.classList.add('show');
            }, 1500); // после fade-out
        }
    });

</script>
<script>
    window.addEventListener('load', () => {
        const introWrap = document.getElementById('intro-video-wrap');
        const video = document.getElementById('intro-video');

        // Вариант 1: ждём окончания видео
        video.addEventListener('ended', hideIntro);

        // Вариант 2: если хочешь автозакрытие через 5 сек независимо от окончания
        // setTimeout(hideIntro, 5000);

        function hideIntro() {
            introWrap.classList.add('fade-out');

            // Появление основного сайта после скрытия
            setTimeout(() => {
                introWrap.remove();
                document.body.classList.add('reveal-start');
                document.querySelector('.block1')?.classList.add('show');
            }, 1000); // дождаться fade-out
        }
    });
</script>

<script>
    /* 1) полифилл для старых Safari — берём у WICG, 4 KB */
    (async () => {
        if (!('IntersectionObserver' in window)) {
            await import('https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserver');
        }

        ['.reveal', '.reveal-delayed'].forEach(sel =>
            document.querySelectorAll(sel).forEach(el => observer.observe(el)));
    })();
    /* 2) подписываемся и на reveal‑delayed */
    ['.reveal', '.reveal-delayed'].forEach(sel =>
        document.querySelectorAll(sel).forEach(el => observer.observe(el)));
</script>
<script>
    /* В head или самым первым в body */
    if ('scrollRestoration' in history) {
        history.scrollRestoration = 'manual';
    }

    /* подстраховка: мгновенно наверх после полной загрузки */
    window.addEventListener('load', () => window.scrollTo(0, 0));
</script>

<script>
    /* ——— helpers ——— */
    function swipe(el, cbLeft, cbRight, min = 40) {
        let x0 = null;
        el.addEventListener('touchstart', e => x0 = e.touches[0].clientX, { passive: true });
        el.addEventListener('touchend', e => {
            if (x0 === null) return;
            const dx = e.changedTouches[0].clientX - x0;
            if (Math.abs(dx) > min) (dx < 0 ? cbLeft : cbRight)();
            x0 = null;
        });
    }

    /* ——— слайдер ——— */
    const sliderWrap = document.getElementById('slider-display');
    swipe(sliderWrap,
        () => { current = (current + 1) % len; render(); haptic(); },
        () => { current = (current - 1 + len) % len; render(); haptic(); });

    /* ——— галерея ——— */
    const gallery = document.querySelector('.gallery');
    swipe(gallery,
        () => { groupIdx = (groupIdx + 1) % groupsTotal; renderGallery(); resetTimer(); },
        () => { groupIdx = (groupIdx - 1 + groupsTotal) % groupsTotal; renderGallery(); resetTimer(); });

</script>

<script type="module">

    (async () => {
        /* 1. Поля и цели ----------------------------- */
        const targets = [...document.querySelectorAll('.reveal, .reveal-delayed')];

        /* 2. Если браузер древний — подтягиваем полифилл */
        (async () => {
            if (!('IntersectionObserver' in window)) {
                await import('https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserver');
            }

            ['.reveal', '.reveal-delayed'].forEach(sel =>
                document.querySelectorAll(sel).forEach(el => observer.observe(el)));
        })();


        /* 3. Функция создания/пересоздания наблюдателя */
        let io;                                // ссылка на текущий observer
        const makeObserver = () => {
            if (io) io.disconnect();             // удаляем, если уже был

            const mobile = matchMedia('(max-width:768px)').matches;
            const vh = (window.visualViewport || window).height;
            const treshold = mobile ? 0.05 : 0.25;               // 5 % или 25 %
            const margin = mobile ? -(vh * 0.4) : -(vh * 0.2); // -40 % или -20 %

            io = new IntersectionObserver((entries, obs) => {
                entries.forEach(e => {
                    if (e.isIntersecting) {
                        e.target.classList.add('show'); // CSS-анимация стартует
                        obs.unobserve(e.target);        // больше не следим
                    }
                });
            }, {
                threshold: treshold,
                rootMargin: `0px 0px ${margin}px 0px`
            });

            targets.forEach(el => io.observe(el));
        };

        /* 4. Первый запуск после загрузки разметки */
        window.addEventListener('DOMContentLoaded', makeObserver);

        /* 5. Пересоздаём при изменении высоты viewport’а
              (адрес‑бар спрятался / появился, поворот экрана, resize) */
        let debounce;
        ['resize', 'orientationchange'].forEach(evt =>
            window.addEventListener(evt, () => {
                clearTimeout(debounce);
                debounce = setTimeout(makeObserver, 120); // лёгкий debounce
            })
        );
    })();

</script>

<script>
    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
    const video = document.getElementById('intro-video');
    const gif = document.getElementById('intro-fallback');

    if (isIOS) {
        // Показать gif только на iOS
        video.remove(); // убираем тег <video> полностью
        gif.src = "img/intro2_silent2.gif";
        gif.style.display = "block";
    } else {
        // Если не iOS, удалить <img> из DOM — даже не грузим gif
        gif.remove();
    }
</script>

</html>